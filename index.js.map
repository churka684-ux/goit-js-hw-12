{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"53403770-87d4de3df2f0f55697bb62e3a\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function getImagesByQuery(query, page) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  });\n\n  return response.data;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryEl = document.querySelector(\".gallery\");\nconst loaderEl = document.getElementById(\"loader\");\nconst loadMoreWrapper = document.querySelector(\".load-more-wrapper\");\nconst loadMoreBtn = document.getElementById(\"load-more-btn\");\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  if (!Array.isArray(images) || images.length === 0) return;\n\n  const markup = images.map(img => {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = img;\n\n    return `\n      <li class=\"gallery-item\">\n        <a class=\"card\" href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <div class=\"meta\">\n            <div class=\"stat\">\n              <span class=\"stat-title\">Likes</span>\n              <span class=\"stat-value\">${likes}</span>\n            </div>\n            <div class=\"stat\">\n              <span class=\"stat-title\">Views</span>\n              <span class=\"stat-value\">${views}</span>\n            </div>\n            <div class=\"stat\">\n              <span class=\"stat-title\">Comments</span>\n              <span class=\"stat-value\">${comments}</span>\n            </div>\n            <div class=\"stat\">\n              <span class=\"stat-title\">Downloads</span>\n              <span class=\"stat-value\">${downloads}</span>\n            </div>\n          </div>\n        </div>\n        </a>\n      </li>\n    `;\n  }).join(\"\");\n\n  galleryEl.insertAdjacentHTML(\"beforeend\", markup);\n\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryEl.innerHTML = \"\";\n  lightbox.refresh();\n}\n\nexport function showLoader() {\n  loaderEl.classList.remove(\"is-hidden\");\n  loaderEl.classList.add(\"is-visible\");\n  loaderEl.setAttribute(\"aria-hidden\", \"false\");\n}\n\nexport function hideLoader() {\n  loaderEl.classList.remove(\"is-visible\");\n  loaderEl.classList.add(\"is-hidden\");\n  loaderEl.setAttribute(\"aria-hidden\", \"true\");\n}\n\nexport function showLoadMoreButton() {\n  document.querySelector('.load-more-wrapper').classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n  document.querySelector('.load-more-wrapper').classList.add('is-hidden');\n}\n","import \"izitoast/dist/css/iziToast.css\";\r\nimport iziToast from \"izitoast\";\r\n\r\nimport SimpleLightbox from \"simplelightbox\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\n\r\nimport \"loaders.css/loaders.min.css\";\r\nimport \"./css/styles.css\";\r\n\r\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\r\nimport {\r\n  createGallery,\r\n  clearGallery,\r\n  showLoader,\r\n  hideLoader,\r\n  showLoadMoreButton,\r\n  hideLoadMoreButton,\r\n} from \"./js/render-functions.js\";\r\n\r\nlet currentPage = 1;\r\nlet currentQuery = \"\";\r\nlet totalHits = 0;\r\n\r\nconst loadMoreBtn = document.getElementById(\"load-more-btn\");\r\nconst form = document.querySelector(\".form\");\r\nconst input = form.querySelector('input[name=\"search-text\"]');\r\n\r\nform.addEventListener(\"submit\", async (e) => {\r\n  e.preventDefault();\r\n\r\n  const query = input.value.trim();\r\n\r\n  if (!query) {\r\n    iziToast.error({\r\n      title: \"Error\",\r\n      message: \"Please enter a search term.\",\r\n      position: \"topRight\",\r\n    });\r\n    return;\r\n  }\r\n\r\n  currentPage = 1;\r\n  currentQuery = query;\r\n\r\n  clearGallery();\r\n  hideLoadMoreButton();\r\n  showLoader();\r\n\r\n  try {\r\n    const data = await getImagesByQuery(query, currentPage);\r\n\r\n    totalHits = data.totalHits;\r\n    const hits = data.hits;\r\n\r\n    if (hits.length === 0) {\r\n      iziToast.info({\r\n        title: \"No results\",\r\n        message: \"Sorry, there are no images matching your search query.\",\r\n        position: \"topRight\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    createGallery(hits);\r\n\r\n    if (hits.length >= 15 && totalHits > hits.length) {\r\n      showLoadMoreButton();\r\n    }\r\n\r\n  } catch (err) {\r\n    iziToast.error({\r\n      title: \"Error\",\r\n      message: \"Something went wrong\",\r\n      position: \"topRight\",\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n});\r\n\r\nloadMoreBtn.addEventListener(\"click\", async () => {\r\n  currentPage += 1;\r\n  showLoader();\r\n\r\n  try {\r\n    const data = await getImagesByQuery(currentQuery, currentPage);\r\n\r\n    createGallery(data.hits);\r\n\r\n    const cardHeight = document\r\n      .querySelector(\".gallery-item\")\r\n      .getBoundingClientRect().height;\r\n\r\n    window.scrollBy({\r\n      top: cardHeight * 2,\r\n      behavior: \"smooth\",\r\n    });\r\n\r\n    const totalLoaded = document.querySelectorAll(\".gallery-item\").length;\r\n\r\n    if (totalLoaded >= totalHits) {\r\n      hideLoadMoreButton();\r\n      iziToast.info({\r\n        title: \"End of results\",\r\n        message: \"We're sorry, but you've reached the end of search results.\",\r\n        position: \"topRight\",\r\n      });\r\n    }\r\n\r\n  } catch (err) {\r\n    iziToast.error({\r\n      title: \"Error\",\r\n      message: \"Failed to load more images.\",\r\n      position: \"topRight\",\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n});\r\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","axios","galleryEl","loaderEl","lightbox","SimpleLightbox","createGallery","images","markup","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","currentPage","currentQuery","totalHits","loadMoreBtn","form","input","e","iziToast","data","hits","cardHeight"],"mappings":"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"}